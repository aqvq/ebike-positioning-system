## 使用AT指令连接

1. 测试4G模块工作状态

```shell
AT              # 测试指令，若返回OK，则模块可正常通信
AT+CPIN?        # 检查SIM卡是否在位
AT+CSQ          # 查询信号质量
AT+CREG?        # 查询入网状态
AT+CGATT=1      # 激活网络
AT+CGATT?       # 查询激活状态
AT+CGPADDR      # 获取PDP地址
```

2. 连接物联网平台

```shell
AT+QMTCFG="recv/mode",0,0,1                                                         # 配置为接收模式
AT+QMTCFG="aliauth",0,"a17S6soVoCJ","TEST12345678","014d6427428eab072d8d4f311f66a467"      # 配置阿里云上的设备信息
AT+QMTOPEN=0,"iot-as-mqtt.cn-shanghai.aliyuncs.com",1883                            # 打开一个MQTT客户端网络，打开后后需要立即连接，否则将会关闭
AT+QMTCONN=0,"TEST12345678"                                                                # 连接MQTT服务器

```

3. 发送数据

```shell
AT+QMTPUB=0,0,0,0,"/a17S6soVoCJ/TEST12345678/user/tpa"        # 发布主题消息
{params:{Temperature:27.5}}	                                            # 发送的JSON数据
1a                                                                              # 数据结束符，需采用HEX形式发送
```

4. 接收数据

```shell
AT+QMTSUB=0,1,"/sys/ProductKey/DeviceName/thing/service/property/set",0	        # 订阅服务器发布主题
```

## 参考链接

[https://blog.csdn.net/qq_42965739/article/details/107030413](https://blog.csdn.net/qq_42965739/article/details/107030413)

> 注意AT指令用英文的引号而不是中文的引号
